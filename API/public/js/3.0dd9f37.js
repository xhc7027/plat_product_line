(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"/5yV":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"create-page page flex flex-center"},[a("div",{staticClass:"container full-width"},[a("form",{attrs:{action:"/","data-vv-scope":"bind"}},[a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"orderSerialInput",attrs:{name:"serial1",clearable:"",autofocus:"",before:[{icon:"fas fa-barcode",handler:function(){}}],"float-label":"机身条码",placeholder:"输入","auto-complete":"off",spellcheck:"false",disable:1!==e.stage,error:e.$validator.errors.has("serial1")},model:{value:e.orderSerial,callback:function(t){e.orderSerial=t},expression:"orderSerial"}},[a("validate-error",{attrs:{message:"请输入机身条码"}})],1),a("q-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"serial2",clearable:"",before:[{icon:"fas fa-barcode",handler:function(){}}],"float-label":"APP检测结果条码",placeholder:"输入",spellcheck:"false",disable:1!==e.stage,error:e.$validator.errors.has("serial2")},model:{value:e.resultSerial,callback:function(t){e.resultSerial=t},expression:"resultSerial"}},[a("validate-error",{attrs:{message:"请输入屏幕条码"}})],1),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:1===e.stage,expression:"stage === 1"}],staticClass:"save-btn save1-btn",attrs:{color:"secondary",width:"200",size:"md",label:"提交"},on:{click:function(t){e.save1()}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.stage>1,expression:"stage > 1"}],staticClass:"sku-questions"},[a("h4",[e._v("SKU选项")]),a("hsb-questions",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"questions1",items:e.computedSkuItems,"data-vv-scope":"calc"},model:{value:e.skuResults,callback:function(t){e.skuResults=t},expression:"skuResults"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.stage>1,expression:"stage > 1"}],staticClass:"extra-questions"},[a("h4",[e._v("手工输入选项")]),a("hsb-questions",{attrs:{name:"questions2",items:e.computedExtraItems,disable:1!==e.stage},model:{value:e.extraResults,callback:function(t){e.extraResults=t},expression:"extraResults"}})],1),a("q-field",{directives:[{name:"show",rawName:"v-show",value:e.stage>1,expression:"stage > 1"}],attrs:{label:"备注","label-width":2}},[a("q-input",{attrs:{type:"textarea",color:"tertiary",rows:"4","text-color":"#666","inverted-light":""},model:{value:e.memo,callback:function(t){e.memo=t},expression:"memo"}})],1),a("p",[e._v(" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.stage>2,expression:"stage > 2"}],staticClass:"price-result"},[a("h6",[e._v("估价结果")]),a("p",[a("span",{staticClass:"price"},[e._v(e._s(e._f("money")(e.priceResult)))])])]),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:1!==e.stage,expression:"stage !== 1"}],staticClass:"save-btn save2-btn",attrs:{color:"secondary",label:"提交"},on:{click:function(t){e.save2()}}}),a("q-btn",{directives:[{name:"show",rawName:"v-show",value:1!==e.stage,expression:"stage !== 1"}],staticClass:"cancel-btn",attrs:{color:"tertiary","text-color":"#999",size:"md",label:"取消"},on:{click:function(t){e.cancel()}}})],1),a("p",[e._v(" ")]),a("p",[e._v(" ")])])},n=[];s._withStripped=!0;a("91GP"),a("Z2Ku"),a("L9s1"),a("rGqo");var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"field",class:e.name},[a("q-field",{attrs:{helper:"",label:e.label,"label-width":2}},[a("hsb-btn-select",{attrs:{name:e.name,color:"tertiary","text-color":"#666666 ","toggle-color":"secondary",multiple:e.multiple,options:e.computedOptions},on:{input:e.onSelectChange},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}})],1)],1)},l=[];i._withStripped=!0;var o=a("SC7v"),r=a("FzGJ"),u={name:"BtnSelect",props:{value:{type:[String,Array],required:!0},multiple:{type:Boolean,default:!1},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,options:{type:Array,required:!0,validator:function(e){return e.every(function(e){return("label"in e||"icon"in e)&&"value"in e})}},readonly:Boolean,disable:Boolean,noCaps:Boolean,noWrap:Boolean,outline:Boolean,flat:Boolean,dense:Boolean,rounded:Boolean,push:Boolean,size:String,glossy:Boolean,noRipple:Boolean,waitForRipple:Boolean},computed:{},data:function(){return{selected:[]}},methods:{click:function(e,t){var a=this;if(!this.readonly){if(this.multiple)if(this.selected.includes(e)){var s=this.selected.indexOf(e);this.selected.splice(s,1)}else this.selected.push(e);else this.selected=[e];this.$nextTick(function(){JSON.stringify(e)!==JSON.stringify(a.value)&&a.$emit("input",a.selected,t)})}}},render:function(e){var t=this;return e(r["a"],{staticClass:"q-btn-toggle",props:{outline:this.outline,flat:this.flat,rounded:this.rounded,push:this.push}},this.options.map(function(a,s){return e(o["a"],{key:"".concat(a.label).concat(a.icon).concat(a.iconRight),on:{click:function(){return t.click(a.value,a)}},props:{disable:t.disable,label:a.label,color:t.selected.includes(a.value)?a.toggleColor||t.toggleColor:a.color||t.color,textColor:t.selected.includes(a.value)?a.toggleTextColor||t.toggleTextColor:a.textColor||t.textColor,icon:a.icon,iconRight:a.iconRight,noCaps:t.noCaps||a.noCaps,noWrap:t.noWrap||a.noWrap,outline:t.outline,flat:t.flat,rounded:t.rounded,push:t.push,glossy:t.glossy,size:t.size,dense:t.dense,noRipple:t.noRipple||a.noRipple,waitForRipple:t.waitForRipple||a.waitForRipple,tabindex:a.tabindex}})}))}},c={name:"field",props:{type:{type:String,default:"button"},multiple:{type:Boolean,default:!1},value:{type:[String,Array],default:""},label:String,name:String,options:{type:Array,default:function(){return["A","B"]}}},computed:{computedOptions:{get:function(){var e=this.options;return"string"===typeof e[0]&&(e=e.filter(function(e){return e}).map(function(e){return{label:e,value:e}})),e}}},data:function(){return{dataValue:this.value}},methods:{onSelectChange:function(){this.$emit("input",this.dataValue)}},components:{HsbBtnSelect:u},mounted:function(){}},d=c,p=(a("ieA0"),a("KHd+")),f=Object(p["a"])(d,i,l,!1,null,null,null),m=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"options"},[e._l(e.computedItems,function(t,s){return a("hsb-field",{key:s,attrs:{type:"button",label:t.label,name:t.name,multiple:t.multiple||!1,options:t.options},on:{input:function(a){e.onFieldChange(t.name,a)}},model:{value:e.values[s],callback:function(t){e.$set(e.values,s,t)},expression:"values[index]"}})}),a("p",[e._v(" ")])],2)},h=[];v._withStripped=!0;a("yt8O");var b={name:"sku-questions",props:{items:Array},computed:{computedItems:function(){return this.items.map(function(e){return-1!==e.label.indexOf("多选")&&(e.multiple=!0),e})}},data:function(){return{values:{}}},mounted:function(){},methods:{onFieldChange:function(e,t){console.info("onFieldCHange--------",e,t),this.values[e]=t,console.info("onFieldCHange--------////",this.values),this.$emit("input",this.values)}},components:{HsbField:m}},g=b,x=Object(p["a"])(g,v,h,!1,null,null,null),w=x.exports,S={name:"create-page",data:function(){return{stage:1,orderSerial:"C180329001100000000001",resultSerial:"2b4f822d81756917OrZZ21",skuItems:[],extraItems:[],skuResults:[],extraResults:[],memo:"",priceResult:0,input1:""}},mounted:function(){this.$refs.orderSerialInput.focus()},computed:{computedSkuItems:function(){return this.skuItems.filter(function(e){return e})},computedExtraItems:function(){return this.extraItems.filter(function(e){return!e.finished})}},methods:{save1:function(){var e=this;this.$validator.validateAll("bind").then(function(t){t?e.$http.post("/bind",{data:{orderSerial:e.orderSerial,resultSerial:e.resultSerial}}).then(function(t){e.skuItems=t.skuItems,e.extraItems=t.extraItems,e.stage=2}):e.$refs.orderSerialInput.focus()})},save2:function(){var e=this;this.$validator.validateAll("calc").then(function(t){t?e.$http.post("/calc",{data:{resultSerial:e.resultSerial},beforeParams:e.calcBeforeParams}).then(function(t){e.stage=3,e.priceResult=t.price-0,e.notice("已保存")}):e.notice("有选项未填写")})},cancel:function(){this.stage=1},calcBeforeParams:function(e){var t=this;return this.skuItems.forEach(function(e){var a=t.skuResults["field-"+e.id];a&&e.options.forEach(function(e){e.selected=a.includes(e.value)})}),this.extraItems.forEach(function(e){var a=t.extraResults["field-"+e.id];a&&e.options.forEach(function(e){e.selected=a&&a.includes(e.value)})}),Object.assign({},{skuItems:this.skuItems,extraItems:this.extraItems},e)}},components:{HsbField:m,HsbQuestions:w}},y=S,k=(a("zriD"),Object(p["a"])(y,s,n,!1,null,null,null));t["default"]=k.exports},QeCi:function(e,t,a){},ieA0:function(e,t,a){"use strict";var s=a("qLLR"),n=a.n(s);n.a},qLLR:function(e,t,a){},zriD:function(e,t,a){"use strict";var s=a("QeCi"),n=a.n(s);n.a}}]);