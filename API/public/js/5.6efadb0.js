(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"+tJj":function(t,o,s){"use strict";var n=s("mnXF"),e=s.n(n);e.a},"7yoA":function(t,o,s){"use strict";var n=s("Luk9"),e=s.n(n);e.a},Luk9:function(t,o,s){},Q4eH:function(t,o,s){"use strict";s.r(o);var n=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("q-page",{staticClass:"scheduler-page page flex"},[s("div",{staticClass:"container full-width"},[s("h1",[t._v("产线实时状况")]),s("p",[t._v(" ")]),s("hsb-machine",{attrs:{tasks:t.tasksData}}),s("p",[t._v(" ")]),s("h2",[t._v("检测机模拟")]),s("p",[t._v(" ")]),s("hsb-simulator")],1)])},e=[];n._withStripped=!0;s("dRSK");var c=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"simulator"},[s("div",{staticClass:"buttons row"},[s("q-input",{staticClass:"sn-input",model:{value:t.sn,callback:function(o){t.sn=o},expression:"sn"}}),s("q-btn",{attrs:{color:"secondary"},on:{click:t.onCreateTask}},[t._v("进料")])],1),s("div",{staticClass:"buttons row"},[s("q-btn",{attrs:{color:"secondary"},on:{click:t.onMove}},[t._v("MOVE")]),s("q-btn",{attrs:{color:"negative"},on:{click:t.onReset}},[t._v("RESET")])],1),s("p",[t._v(" ")]),s("h2",[t._v("发送指令到APP (command goto)")]),s("div",{staticClass:"buttons row"},[s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("lcd.white")}}},[t._v("LCD.white")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("lcd.blue")}}},[t._v("LCD.blue")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("lcd.grey")}}},[t._v("LCD.grey")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("lcd.red")}}},[t._v("LCD.red")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("touch")}}},[t._v("TOUCH")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("camera1")}}},[t._v("CAMERA 1")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("camera2")}}},[t._v("CAMERA 2")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("camera3")}}},[t._v("CAMERA 3")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("camera4")}}},[t._v("CAMERA 4")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.commandGoto("sensors")}}},[t._v("SENSORS")])],1),s("p",[t._v(" ")]),s("h2",[t._v("模拟从检测机发送指令 (message)")]),s("div",{staticClass:"buttons row"},[s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.messageHello(123)}}},[t._v("HELLO")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.message("checkout")}}},[t._v("CHECKOUT")])],1),s("h2",[t._v("message goto")]),s("div",{staticClass:"buttons row"},[s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.messageGoto("lcd.white")}}},[t._v("LCD")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.messageGoto("touch")}}},[t._v("TOUCH")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.messageGoto("camera1")}}},[t._v("CAMERA 1")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.messageGoto("camera2")}}},[t._v("CAMERA 2")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.messageGoto("camera3")}}},[t._v("CAMERA 3")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.messageGoto("camera4")}}},[t._v("CAMERA 4")]),s("q-btn",{attrs:{color:"secondary"},on:{click:function(o){t.messageGoto("sensors")}}},[t._v("SENSORS")])],1)])},a=[];c._withStripped=!0;var r={name:"simulator",data:function(){return{sn:"100000000017",sn2:"100000000088"}},methods:{onCreateTask:function(){this.$feathers.service("tasks").create({product:this.sn,stage:0})},onMove:function(){console.log("sheduler--tasks",this.tasksService)},command:function(t,o){var s={sn:this.sn2};o&&(s.stage=o),this.$feathers.service("commands").create({name:t,params:s})},commandGoto:function(t){this.command("goto",t)},message:function(t,o,s){s=s||{},o&&(s.stage=o),s.sn=this.sn2,this.$feathers.service("messages").create({type:t,params:s})},messageGoto:function(t){this.message("goto",t)},messageHello:function(t){this.message("hello","",{random:t})},onReset:function(){this.$feathers.service("tasks").remove(null,{query:{stage:0}}).then(function(t){console.log("log-----reset",t)})}}},i=r,l=(s("h3I3"),s("KHd+")),u=Object(l["a"])(i,c,a,!1,null,null,null),d=u.exports,m=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"machine"},[s("div",{staticClass:"line row gutter-xs"},[s("div",{staticClass:"station entry col col-2"},[s("label",[t._v("进料")]),s("h6",[t._v(t._s(t.tasks[0]?t.tasks[0].product.substr(-4):"-"))])]),t._l([1,2,3,4,5,6,7,8,9],function(o){return s("div",{key:o,staticClass:"station col col-1"},[s("label",{staticClass:"number"},[t._v(t._s(o))]),s("h6",{attrs:{"text-color":"secondary"}},[t._v(t._s(t.tasks[o]?t.tasks[o].product.substr(-4):"-"))])])}),t._m(0)],2)])},v=[function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"station col col-1"},[s("label",[t._v("出料")])])}];m._withStripped=!0;var f={name:"machine",props:{tasks:Array},data:function(){return{}},methods:{}},h=f,_=(s("7yoA"),Object(l["a"])(h,m,v,!1,null,null,null)),k=_.exports,g={name:"scheduler-page",data:function(){return{tasksService:null,tasksData:[]}},mounted:function(){var t=this;this.$feathers.authenticate({strategy:"local",email:"steam-web@huishoubao.com.cn",password:"123456"}).then(function(o){console.log("log-----","feathers loggedin",o),t.$feathers.io.on("pong",function(t){console.log("$feathers on pong////",t)}),t.tasksService=t.$feathers.service("tasks"),t.tasksService.on("created",function(o){console.log("task created======================="),t.refresh()}),t.tasksService.on("updated",function(o){console.log("task updated======================="),t.refresh()}),t.$feathers.service("commands").on("goto",function(t){console.log("COMMAND GOTO --------------------------------------",t)}),t.$feathers.service("messages").on("done",function(o){console.log("COMMAND DONE --------------------------------------",o),t.notice("DONE "+o.stage)}),t.refresh()}).catch(function(t){console.error("$feathers authentication error:=====",t)})},methods:{refresh:function(){var t=this;this.tasksService.find({}).then(function(o){console.info("results--",o),t.tasksData=o.data})}},components:{HsbSimulator:d,HsbMachine:k}},b=g,p=(s("+tJj"),Object(l["a"])(b,n,e,!1,null,null,null));o["default"]=p.exports},chVp:function(t,o,s){},h3I3:function(t,o,s){"use strict";var n=s("chVp"),e=s.n(n);e.a},mnXF:function(t,o,s){}}]);